# 什么是CDN - Content delivery network 内容分发网络
**This note is based on a [Youtube Video](https://youtu.be/Bsq5cKkS33I) given by IBM**
**Go to [Azure Introduction to CDN](https://docs.microsoft.com/en-us/azure/cdn/cdn-overview) to learn more**

其实这是一个很简单的方法，当然后面物理层的技术就很多了。

# Background

+ 你是一家深圳的创业公司的网络系统工程师，一开始你们做社区服务，用户都是深圳的居民。  
+ 很快你们公司大获成功，老板决定向全国推广你们的服务。
+ 很快啊，全国各地都有你们的用户。但这个时候你发现一个巨大的问题：你们公司是 client-server，而servers全部都放在深圳。
+ 北京、内蒙古的用户很快向你们抱怨：使用你们公司的服务时“网速”特别慢，经常要等好久才能开启一个新界面。

# How to improve?

+ 老板跟你说，赶紧多买一些服务器！
+ 你照老板说的话这样做了。
+ 深圳地区、广东省内的用户体验极好。
+ 黑龙江、新疆的用户体验依然没有改善。
+ 这时候你终于发掘：并不是服务器不够用了，而是用户与你们服务器之间的链路太长了。
+ 所以你向老板建议：在每个省份的省会城市都部署服务器，让用户就近访问该省份的服务器。
+ 老板说：难道我们要每个省份都开设机房、招网络工程师吗？
+ 你回答：并不是，我们使用网络服务提供商提供的CDN服务就可以了。把Main Server上的服务内容复制到各个地区的Server就可以了！

# 小结

当我们在网上冲浪的时候，总会想象数据包翻山跨洋跨越重重阻碍经过无数路由到达服务器，再由相同的路径返回。但是其实并不一定，很可能你的数据包仅仅是到了对街的一个PoP处理完就回来了。PoP is the abbr. to **Point-of-Presence**.

![](source/img/Azure%20CDN%20Figure.png)

# 企业使用 CDN 部署服务的优点

1. 第一个显性的优点即是用户的体验性上升了。通过减少访问的物理距离（尤其是减少环路访问）来减少通信环路的时间。
2. 了解PoP的工作方式以后不难发现Files会储存在 edge server 上 TTL时间。很明显，**当某项服务所需的数据量越大，CDN的优势便成比例地上升。**要求一个大型服务的数据在传输链路上又快又完整用传统连接方式要付出巨大成本。
3. 对于服务提供商来说，分布式服务提升的用户体验巨大；采用分布式服务可以有效降低提升单位用户体验的成本，因为 edge server 承受了一定区域内的load，使得origin server所要承受的负载降低了；因负载过大而服务崩溃的可能性大大降低了。

